# zig-tty-test-data

This project is used to generate test data for Zig `docgen`, when testing the
code parsing the ANSI escape codes.

The escape sequences currently supported by Zig are:

  - `\x1b[31;1m` (red)
  - `\x1b[32;1m` (green)
  - `\x1b[36;1m` (cyan)
  - `\x1b[1m`    (bold)
  - `\x1b[2m`    (dim)
  - `\x1b[0m`    (reset)
  - `\x1b[nD`    (cursor back)
  - `\x1b[0K`    (erase in line)

The test data is generated using the Zig programs in the `src` directory, and
the output generated by the compiler or by the executable is written to the
`data` directory.

The output is processed by the `github.com/perillo/zstring-decode` tool,
converting the raw data to a valid Zig string literal.

A Docker container is used in order to anonymize the path to source files.

### Usage

To build the docker image, use the command `./make.sh build`, ensuring that the
current user has normal privileges.  The `make.sh` script will execute docker
commands with `sudo`.

The Docker file will download and install the latest release from the master
branch of the Zig compiler, for the current platform.

To run the docker container, use the command `./make run`.  The container is
configured with bind mounts to the `src` and `data` directory in the working
directory.

### TODO

  - [ ] Add support for providing a custom version for the Zig compiler, like 
    `0.10.1`.  The `download-zig.py` script already support a custom version.

  - [ ] Currently, only the `x86_64-linux` target has been tested.
    Windows is probably not supported.
